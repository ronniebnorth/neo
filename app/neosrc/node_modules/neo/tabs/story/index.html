<ph-components>
  <template name="story-editor">
    <style>
      :host {
        display: block;

        flex: 1 1 50em;

        background-color: #fff;

        min-width: 50em;
        height: 100%;

        text-align: left;

        display: inline-block;

        padding: 1em;
      }
    </style>
    <content></content>
    <script>
      class StoryEditor extends PhElement {
        constructor() {
          super();
        }

        connectedCallback() {
          super.connectedCallback();

          this.setAttribute('tabindex', '0');

          $(this).on('keydown keyup keypress', this._handleKeyEvent);
          $(this).on('focus', e => $(this).find('nui-cursor').focus());
        }

        get story() {
          return this._story;
        }

        set story(newStory) {
          this._story = newStory;
          $(this).html(this.story.story.body);
        }

        _handleKeyEvent(e) {
          console.log('editor handling key event', e);
          e.preventDefault();

          return false;
        }
      }
    </script>
  </template>
</ph-components>
